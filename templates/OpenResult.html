{% extends 'base.html' %}

{% block content %}
<br><br>
<center><h3>Winner of poll {{poll.title}} is <span style="color:green;">{{win}}</span>, voted by {{poll.votes}} voters </h3></center>
<br>
<center><div id="piechart"></div></center>

<script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>

<script type="text/javascript">
    // Load google charts
    google.charts.load('current', { 'packages': ['corechart'] });
    google.charts.setOnLoadCallback(drawChart);

    // Draw the chart and set the chart values
    function drawChart() {
        var data = google.visualization.arrayToDataTable([
            ['Options', 'Votes'],
            ['{{poll.o1}}', {{poll.on1}}],
            ['{{poll.o2}}', {{poll.on2}}],
            ['{{poll.o3}}', {{poll.on3}}],
            ['{{poll.o4}}', {{poll.on4}}]
        ]);

        // Optional; add a title and set the width and height of the chart
        var options = { 'title': 'Options', 'width': 550, 'height': 400 };

        // Display the chart inside the <div> element with id="piechart"
        var chart = new google.visualization.PieChart(document.getElementById('piechart'));
        chart.draw(data, options);
    }
</script>

{% endblock %}